"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[5232],{9613:(e,t,n)=>{n.d(t,{Zo:()=>o,kt:()=>g});var a=n(9496);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),c=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},o=function(e){var t=c(e.components);return a.createElement(p.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,l=e.originalType,p=e.parentName,o=s(e,["components","mdxType","originalType","parentName"]),u=c(n),d=r,g=u["".concat(p,".").concat(d)]||u[d]||m[d]||l;return n?a.createElement(g,i(i({ref:t},o),{},{components:n})):a.createElement(g,i({ref:t},o))}));function g(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=n.length,i=new Array(l);i[0]=d;var s={};for(var p in t)hasOwnProperty.call(t,p)&&(s[p]=t[p]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<l;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2181:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>m,frontMatter:()=>l,metadata:()=>s,toc:()=>c});var a=n(2564),r=(n(9496),n(9613));const l={sidebar_position:4},i="\u4ece\u96f6\u5b9e\u73b0 HTTP \u534f\u8bae",s={unversionedId:"http/\u5b9e\u73b0http\u534f\u8bae",id:"http/\u5b9e\u73b0http\u534f\u8bae",title:"\u4ece\u96f6\u5b9e\u73b0 HTTP \u534f\u8bae",description:"HTTPS \u7b80\u4ecb",source:"@site/docs/http/\u5b9e\u73b0http\u534f\u8bae.md",sourceDirName:"http",slug:"/http/\u5b9e\u73b0http\u534f\u8bae",permalink:"/docs/http/\u5b9e\u73b0http\u534f\u8bae",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/http/\u5b9e\u73b0http\u534f\u8bae.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"test",permalink:"/docs/http/test"},next:{title:"Hi!",permalink:"/docs/test"}},p={},c=[{value:"HTTPS \u7b80\u4ecb",id:"https-\u7b80\u4ecb",level:2},{value:"SSL \u548c TLS",id:"ssl-\u548c-tls",level:3},{value:"\u534f\u8bae\u5c42\u7ea7",id:"\u534f\u8bae\u5c42\u7ea7",level:4},{value:"\u4f5c\u7528",id:"\u4f5c\u7528",level:4},{value:"HTTPS \u52a0\u5bc6",id:"https-\u52a0\u5bc6",level:3},{value:"\u5bf9\u79f0\u52a0\u5bc6",id:"\u5bf9\u79f0\u52a0\u5bc6",level:4},{value:"\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a\u51ef\u6492\u52a0\u5bc6",id:"\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a\u51ef\u6492\u52a0\u5bc6",level:5},{value:"AES",id:"aes",level:5},{value:"\u975e\u5bf9\u79f0\u52a0\u5bc6",id:"\u975e\u5bf9\u79f0\u52a0\u5bc6",level:4},{value:"\u5355\u5411\u51fd\u6570",id:"\u5355\u5411\u51fd\u6570",level:5},{value:"\u793a\u4f8b\u4ee3\u7801",id:"\u793a\u4f8b\u4ee3\u7801",level:5},{value:"hash \u52a0\u5bc6",id:"hash-\u52a0\u5bc6",level:4},{value:"\u6570\u5b57\u7b7e\u540d",id:"\u6570\u5b57\u7b7e\u540d",level:4},{value:"\u6570\u5b57\u7b7e\u540d\u6d41\u7a0b",id:"\u6570\u5b57\u7b7e\u540d\u6d41\u7a0b",level:5},{value:"\u539f\u7406",id:"\u539f\u7406",level:5},{value:"\u6570\u5b57\u8bc1\u4e66",id:"\u6570\u5b57\u8bc1\u4e66",level:4},{value:"\u5b9e\u73b0\u6570\u5b57\u8bc1\u4e66\u539f\u7406",id:"\u5b9e\u73b0\u6570\u5b57\u8bc1\u4e66\u539f\u7406",level:5},{value:"Diffie-Hellman \u7b97\u6cd5",id:"diffie-hellman-\u7b97\u6cd5",level:4},{value:"\u539f\u7406",id:"\u539f\u7406-1",level:5},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:5}],o={toc:c},u="wrapper";function m(e){let{components:t,...l}=e;return(0,r.kt)(u,(0,a.Z)({},o,l,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"\u4ece\u96f6\u5b9e\u73b0-http-\u534f\u8bae"},"\u4ece\u96f6\u5b9e\u73b0 HTTP \u534f\u8bae"),(0,r.kt)("h2",{id:"https-\u7b80\u4ecb"},"HTTPS \u7b80\u4ecb"),(0,r.kt)("h3",{id:"ssl-\u548c-tls"},"SSL \u548c TLS"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"\u5b89\u5168\u5957\u63a5\u5c42 SSL\uff08Secure Sockets Layer\uff09"))," \u5728 SSL \u4e4b\u524d HTTP \u4f20\u8f93\u62a5\u6587\u662f\u660e\u6587\uff0c\u53ef\u80fd\u5b58\u5728\u5b89\u5168\u9690\u60a3\uff0cSSL \u4e3a\u6b64\u8bde\u751f\u3002"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},(0,r.kt)("inlineCode",{parentName:"strong"},"\u4f20\u8f93\u5c42\u5b89\u5168\u6027\u534f\u8bae TLS\uff08Transport Layer Security\uff09"))," \u56e0 SSL \u5e94\u7528\u5e7f\u6cdb\uff0c\u540e\u6765\u5c06\u6807\u51c6\u5316\u4e4b\u540e\u7684 SSL \u6539\u540d\u4e3a \u5373\u4f20\u8f93\u5c42\u5b89\u5168\u6027\u534f\u8bae\u3002"),(0,r.kt)("h4",{id:"\u534f\u8bae\u5c42\u7ea7"},"\u534f\u8bae\u5c42\u7ea7"),(0,r.kt)("p",null,"SSL \u548c TLS \u4f4d\u4e8e\u7f51\u7edc\u6a21\u578b ",(0,r.kt)("inlineCode",{parentName:"p"},"HTTP\u7f51\u7edc\u5c42"),"\u548c ",(0,r.kt)("inlineCode",{parentName:"p"},"TCP\u4f20\u8f93\u5c42"),"\u4e4b\u95f4"),(0,r.kt)("h4",{id:"\u4f5c\u7528"},"\u4f5c\u7528"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u9632\u6b62\u4fe1\u606f\u7a83\u542c\u3001\u4fe1\u606f\u7be1\u6539\u3001\u4fe1\u606f\u52ab\u6301"),(0,r.kt)("li",{parentName:"ul"},"\u5177\u5907\u4fe1\u606f\u52a0\u5bc6\u3001\u5b8c\u6574\u6027\u6821\u9a8c\u3001\u8eab\u4efd\u9a8c\u8bc1\u529f\u80fd")),(0,r.kt)("h3",{id:"https-\u52a0\u5bc6"},"HTTPS \u52a0\u5bc6"),(0,r.kt)("p",null,"HTTPS = HTTP + TLS"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u975e\u5bf9\u79f0\u52a0\u5bc6"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5bf9\u79f0\u52a0\u5bc6"),(0,r.kt)("th",{parentName:"tr",align:null},"\u6563\u5217\u7b97\u6cd5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"RSA ECC DH"),(0,r.kt)("td",{parentName:"tr",align:null},"AES DES RC4"),(0,r.kt)("td",{parentName:"tr",align:null},"MD5 SHA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u8d1f\u8d23\u8eab\u4efd\u9a8c\u8bc1"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8d1f\u8d23\u4fe1\u606f\u52a0\u5bc6"),(0,r.kt)("td",{parentName:"tr",align:null},"\u8d1f\u8d23\u5b8c\u6574\u6027\u6821\u9a8c")))),(0,r.kt)("p",null,"\u52a0\u5bc6\u662f\u7814\u7a76\u5982\u4f55\u5b89\u5168\u901a\u4fe1\u7684\u4e00\u79cd\u624b\u6bb5\uff0c\u4fdd\u8bc1\u5728\u6570\u636e\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u7684\u5b89\u5168\u6027\u3002"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u98ce\u9669"),(0,r.kt)("th",{parentName:"tr",align:null},"\u5bf9\u7b56"),(0,r.kt)("th",{parentName:"tr",align:null},"\u65b9\u6cd5"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u4fe1\u606f\u7a83\u542c"),(0,r.kt)("td",{parentName:"tr",align:null},"\u4fe1\u606f\u52a0\u5bc6"),(0,r.kt)("td",{parentName:"tr",align:null},"AES")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5bc6\u94a5\u4f20\u9012"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5bc6\u94a5\u534f\u5546"),(0,r.kt)("td",{parentName:"tr",align:null},"RSA \u548c ECC")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u4fe1\u606f\u7be1\u6539"),(0,r.kt)("td",{parentName:"tr",align:null},"\u5b8c\u6574\u6027\u9a8c\u8bc1"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6563\u5217\u7b97\u6cd5 MD5 \u548c RSA")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u8eab\u4efd\u5192\u5145"),(0,r.kt)("td",{parentName:"tr",align:null},"CA \u8ba4\u8bc1"),(0,r.kt)("td",{parentName:"tr",align:null},"\u6563\u5217\u7b97\u6cd5 + RSA")))),(0,r.kt)("h4",{id:"\u5bf9\u79f0\u52a0\u5bc6"},"\u5bf9\u79f0\u52a0\u5bc6"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5bf9\u79f0\u52a0\u5bc6\u662f\u6700\u5feb\u901f\u3001\u6700\u7b80\u5355\u7684\u4e00\u79cd\u52a0\u5bc6\u65b9\u5f0f\uff0c\u52a0\u5bc6\u4e0e\u89e3\u5bc6\u90fd\u662f\u7528\u7684\u540c\u6837\u7684\u5bc6\u94a5"),(0,r.kt)("li",{parentName:"ul"},"\u4e3b\u6d41\u7684\u6709 AES \u548c DES"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"algorithm"),"\u6307\u52a0\u5bc6\u7b97\u6cd5,\u5982 aes-128-ecb,aes-128-cbc"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"iv"),"\u6307\u5b9a\u52a0\u5bc6\u65f6\u6240\u7528\u5411\u91cf"),(0,r.kt)("li",{parentName:"ul"},"\u5982\u679c\u52a0\u5bc6\u7b97\u6cd5\u662f 128,\u5219\u5bf9\u5e94\u7684\u5bc6\u94a5\u662f 16 \u4f4d,\u52a0\u5bc6\u7b97\u6cd5\u662f 256,\u5bf9\u5e94\u7684\u5bc6\u94a5\u662f 32 \u4f4d")),(0,r.kt)("h5",{id:"\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a\u51ef\u6492\u52a0\u5bc6"},"\u7b80\u5355\u5b9e\u73b0\u4e00\u4e2a\u51ef\u6492\u52a0\u5bc6"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"\u51ef\u6492\u52a0\u5bc6"),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}),(0,r.kt)("th",{parentName:"tr",align:null}))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u4fe1\u606f"),(0,r.kt)("td",{parentName:"tr",align:null},"A"),(0,r.kt)("td",{parentName:"tr",align:null},"B"),(0,r.kt)("td",{parentName:"tr",align:null},"C")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u2193"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2193"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2193"),(0,r.kt)("td",{parentName:"tr",align:null},"\u2193")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},"\u5bc6\u6587"),(0,r.kt)("td",{parentName:"tr",align:null},"D"),(0,r.kt)("td",{parentName:"tr",align:null},"E"),(0,r.kt)("td",{parentName:"tr",align:null},"F")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5b9e\u73b0\u51ef\u6492\u52a0\u5bc6\nlet secret = 3;\nfunction encrypt(message) {\n  let buffer = Buffer.from(message);\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] = buffer[i] + secret;\n  }\n  return buffer.toString();\n}\n\nfunction decrypt(message) {\n  let buffer = Buffer.from(message);\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] = buffer[i] - secret;\n  }\n  return buffer.toString();\n}\n\nlet message = "abc";\n\nlet encryptMessage = encrypt(message);\nconsole.log(encryptMessage);\n\nlet decryptMessage = decrypt(encryptMessage);\nconsole.log(decryptMessage);\n\nconsole.log(message === decryptMessage);\n')),(0,r.kt)("h5",{id:"aes"},"AES"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u4f7f\u7528nodejs\u6807\u51c6\u5e93\u52a0\u5bc6\nconst crypto = require("crypto");\n\nfunction encrypt(data, key, iv) {\n  const cipher = crypto.createCipheriv("aes-128-cbc", key, iv);\n  cipher.update(data);\n  return cipher.final("hex");\n}\n\nfunction decrypt(data, key, iv) {\n  const cipher = crypto.createDecipheriv("aes-128-cbc", key, iv);\n  cipher.update(data, "hex");\n  return cipher.final("utf8");\n}\n\nlet key = "1234567890123456"; // \u4f7f\u7528128\u52a0\u5bc6\u7b97\u6cd5\uff0c\u5bc6\u94a5\u5e94\u8be5\u662f16\u4f4d\nlet iv = "1234567890123456";\nlet data = "hello";\n\nlet encryptData = encrypt(data, key, iv);\nconsole.log(encryptData);\n\nlet decryptData = decrypt(encryptData, key, iv);\nconsole.log(decryptData);\n')),(0,r.kt)("h4",{id:"\u975e\u5bf9\u79f0\u52a0\u5bc6"},"\u975e\u5bf9\u79f0\u52a0\u5bc6"),(0,r.kt)("p",null,"\u89e3\u51b3\u4e92\u8054\u7f51\u4e0a\u6ca1\u6cd5\u5b89\u5168\u4ea4\u6362\u5bc6\u94a5"),(0,r.kt)("h5",{id:"\u5355\u5411\u51fd\u6570"},"\u5355\u5411\u51fd\u6570"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u5355\u5411\u51fd\u6570\u7b97\u8d77\u6765\u975e\u5e38\u5bb9\u6613,\u4f46\u9006\u5411\u6c42\u89e3\u5374\u5f88\u96be"),(0,r.kt)("li",{parentName:"ul"},"\u6574\u6570\u5206\u89e3,\u5c06\u6b63\u6574\u6570\u5199\u6210\u51e0\u4e2a\u7ea6\u6570\u7684\u4e58\u79ef")),(0,r.kt)("h5",{id:"\u793a\u4f8b\u4ee3\u7801"},"\u793a\u4f8b\u4ee3\u7801"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const {\n  generateKeyPairSync,\n  privateEncrypt,\n  publicDecrypt,\n} = require("crypto");\n\nconst rsa = generateKeyPairSync("rsa", {\n  modulusLength: 1024,\n  publicKeyEncoding: {\n    type: "spki",\n    format: "pem", // base64\u683c\u5f0f\u7684\u79c1\u94a5\n  },\n  privateKeyEncoding: {\n    type: "pkcs8",\n    format: "pem",\n    cipher: "aes-256-cbc",\n    passphrase: "codingj",\n  },\n});\n\nlet message = "hello world";\n\nconst encryptMessage = privateEncrypt(\n  {\n    key: rsa.privateKey,\n    passphrase: "codingj",\n  },\n  Buffer.from(message, "utf8")\n);\n\nconsole.log(encryptMessage);\n\nconst decryptMessage = publicDecrypt(rsa.publicKey, encryptMessage);\nconsole.log(decryptMessage.toString());\n')),(0,r.kt)("h4",{id:"hash-\u52a0\u5bc6"},"hash \u52a0\u5bc6"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u540c\u7684\u8f93\u5165\u6709\u4e0d\u540c\u7684\u8f93\u51fa"),(0,r.kt)("li",{parentName:"ul"},"\u4e0d\u80fd\u4ece hash \u53cd\u63a8\u8f93\u5165"),(0,r.kt)("li",{parentName:"ul"},"\u957f\u5ea6\u56fa\u5b9a"),(0,r.kt)("li",{parentName:"ul"},"hash \u6ca1\u6709\u5bc6\u94a5\u7684\u6982\u5ff5,\u53ea\u662f\u8ba1\u7b97\u6563\u5217\u503c\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-JS"},'const { createHash, createHmac } = require("crypto");\n\nlet message = "hello world";\n\nlet md5Hash = createHash("md5").update(message).digest("hex");\nconsole.log(md5Hash);\nconsole.log(md5Hash.length);\n\nlet salt = "coding";\nlet shaHash = createHmac("sha256", salt).update(message).digest("hex");\nconsole.log(shaHash);\nconsole.log(shaHash.length);\n')),(0,r.kt)("h4",{id:"\u6570\u5b57\u7b7e\u540d"},"\u6570\u5b57\u7b7e\u540d"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u7528\u4e8e\u9a8c\u8bc1\u6570\u636e\u7684\u5b8c\u6574\u6027\u548c\u53ef\u9760\u6027"),(0,r.kt)("li",{parentName:"ul"},"\u6570\u5b57\u524d\u9762\u7684\u57fa\u672c\u539f\u7406\u662f\u7528\u79c1\u94a5\u53bb\u7b7e\u540d\uff0c\u516c\u94a5\u53bb\u9a8c\u8bc1\u7b7e\u540d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u52a0\u5bc6\u901a\u4fe1\u662f\u516c\u94a5\u52a0\u5bc6\uff0c\u79c1\u94a5\u89e3\u5bc6"),(0,r.kt)("li",{parentName:"ul"},"\u6570\u5b57\u7b7e\u540d\u662f\u79c1\u94a5\u52a0\u5bc6\uff0c\u516c\u94a5\u89e3\u5bc6\u3002")),(0,r.kt)("h5",{id:"\u6570\u5b57\u7b7e\u540d\u6d41\u7a0b"},"\u6570\u5b57\u7b7e\u540d\u6d41\u7a0b"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u91c7\u7528\u6563\u5217\u7b97\u6cd5\u5bf9\u539f\u59cb\u62a5\u6587\u8fdb\u884c\u8fd0\u7b97\uff0c\u5f97\u5230\u4e00\u4e2a\u56fa\u5b9a\u957f\u5ea6\u7684\u6570\u5b57\u4e32\uff0c\u79f0\u4e3a\u62a5\u6587\u6458\u8981(Message Digest)\uff0c\u4e0d\u540c\u7684\u62a5\u6587\u6240\u5f97\u5230\u7684\u62a5\u6587\u6458\u8981\u5404\u5f02\uff0c\u4f46\u5bf9\u76f8\u540c\u7684\u62a5\u6587\u5b83\u7684\u62a5\u6587\u6458\u8981\u5374\u662f\u60df\u4e00\u7684\u3002\u5728\u6570\u5b66\u4e0a\u4fdd\u8bc1\uff0c\u53ea\u8981\u6539\u52a8\u62a5\u6587\u4e2d\u4efb\u4f55\u4e00\u4f4d\uff0c\u91cd\u65b0\u8ba1\u7b97\u51fa\u7684\u62a5\u6587\u6458\u8981\u503c\u5c31\u4f1a\u4e0e\u539f\u5148\u7684\u503c\u4e0d\u76f8\u7b26\uff0c\u8fd9\u6837\u5c31\u4fdd\u8bc1\u4e86\u62a5\u6587\u7684\u4e0d\u53ef\u66f4\u6539\u6027\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9\u7528\u76ee\u5df1\u7684\u79c1\u6709\u5bc6\u94a5\u5bf9\u6458\u8981\u8fdb\u884c\u52a0\u5bc6\u6765\u5f62\u6210\u6570\u5b57\u7b7e\u540d\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u8fd9\u4e2a\u6570\u5b57\u7b7e\u540d\u5c06\u4f5c\u4e3a\u62a5\u6587\u7684\u9644\u4ef6\u548c\u62a5\u6587\u4e00\u8d77\u53d1\u9001\u7ed9\u63a5\u6536\u65b9\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9\u9996\u5148\u5bf9\u63a5\u6536\u5230\u7684\u539f\u59cb\u62a5\u6587\u7528\u540c\u6837\u7684\u7b97\u6cd5\u8ba1\u7b97\u51fa\u65b0\u7684\u62a5\u6587\u6458\u8981\uff0c\u518d\u7528\u53d1\u9001\u65b9\u7684\u516c\u5f00\u5bc6\u94a5\u5bf9\u62a5\u6587\u9644\u4ef6\u7684\u6570\u5b57\u7b7e\u540d\u8fdb\u884c\u89e3\u5bc6\uff0c\u6bd4\u8f83\u4e24\u4e2a\u62a5\u6587\u6458\u8981\uff0c\u5982\u679c\u503c\u76f8\u540c\uff0c\u63a5\u6536\u65b9\u5c31\u80fd\u786e\u8ba4\u8be5\u6570\u5b57\u7b7e\u540d\u662f\u53d1\u9001\u65b9\u7684\uff0c\u5426\u5219\u5c31\u8ba4\u4e3a\u6536\u5230\u7684\u62a5\u6587\u662f\u4f2a\u9020\u7684\u6216\u8005\u4e2d\u9014\u88ab\u7be1\u6539\u3002")),(0,r.kt)("h5",{id:"\u539f\u7406"},"\u539f\u7406"),(0,r.kt)("p",null,"\u56e0\u4e3a\u6570\u5b57\u7b7e\u540d\u662f\u901a\u8fc7\u79c1\u94a5\u52a0\u5bc6\uff0c\u6240\u4ee5\u5f53\u63a5\u6536\u65b9\u4f7f\u7528\u516c\u94a5\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5bc6\uff0c\u82e5\u8ddf\u79c1\u94a5\u52a0\u5bc6\u7ed3\u679c\u4e00\u81f4\uff0c\u8bf4\u660e\u7b7e\u540d\u901a\u8fc7"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const { generateKeyPairSync, createSign, createVerify } = require("crypto");\n\n// \u751f\u6210\u4e00\u5bf9\u5bc6\u94a5\uff0c\u4e00\u4e2a\u662f\u516c\u94a5\u4e00\u4e2a\u662f\u79c1\u94a5\nconst rsa = generateKeyPairSync("rsa", {\n  modulusLength: 1024,\n  publicKeyEncoding: {\n    type: "spki",\n    format: "pem", //base64\u683c\u5f0f\u7684\u5bc6\u94a5\n  },\n  privateKeyEncoding: {\n    type: "pkcs8",\n    format: "pem",\n    cipher: "aes-256-cbc",\n    passphrase: "passphrase",\n  },\n});\n\nconsole.log(rsa);\nlet file = "\u8fd9\u662f\u4e00\u4e2a\u5373\u5c06\u52a0\u5bc6\u7684\u6587\u4ef6";\n// \u521b\u5efa\u7b7e\u540d\u5bf9\u8c61\nconst signObj = createSign("RSA-SHA256");\nsignObj.update(file);\n// \u7528RSA\u79c1\u94a5\u7b7e\u540d,\u751f\u621016\u8fdb\u5236\u5b57\u7b26\u4e32\nconst sign = signObj.sign(\n  {\n    key: rsa.privateKey,\n    format: "pem",\n    passphrase: "passphrase",\n  },\n  "hex"\n);\n\nconsole.log(sign);\n\n// \u521b\u5efa\u7b7e\u540d\u9a8c\u8bc1\u5bf9\u8c61\nconst verifyObj = createVerify("RSA-SHA256");\n// \u653e\u5165\u6587\u4ef6\u5185\u5bb9\nverifyObj.update(file);\n// \u9a8c\u8bc1\u7b7e\u540d\u662f\u5426\u5408\u6cd5\nconst isvalid = verifyObj.verify(rsa.publicKey, sign, "hex");\nconsole.log(isvalid); // true \u9a8c\u8bc1\u901a\u8fc7\n')),(0,r.kt)("h4",{id:"\u6570\u5b57\u8bc1\u4e66"},"\u6570\u5b57\u8bc1\u4e66"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u6570\u5b57\u8bc1\u4e66\u662f\u4e00\u4e2a\u53ef\u4fe1\u7684\u7b2c\u4e09\u65b9\u53d1\u51fa\u7684\uff0c\u7528\u6765\u8bc1\u660e\u6240\u6709\u4eba\u8eab\u4efd\u4ee5\u53ca\u6240\u6709\u4eba\u62e5\u6709\u67d0\u4e2a\u516c\u94a5\u7684\u7535\u5b50\u6587\u4ef6")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u8bc1\u4e66\u76ee\u7684\u662f\u8bc1\u660e\u62ff\u5230\u7684\u516c\u94a5\u662f\u771f\u7684"),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("img",{alt:"\u6570\u5b57\u8bc1\u4e66\u6d41\u7a0b",src:n(3179).Z,width:"1076",height:"522"})))),(0,r.kt)("h5",{id:"\u5b9e\u73b0\u6570\u5b57\u8bc1\u4e66\u539f\u7406"},"\u5b9e\u73b0\u6570\u5b57\u8bc1\u4e66\u539f\u7406"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u5b9e\u73b0\u6570\u5b57\u8bc1\u4e66\u7684\u539f\u7406\n\nconst {\n  generateKeyPairSync,\n  createSign,\n  createVerify,\n  createHash,\n} = require("crypto");\n\n// \u5bc6\u7801\nconst passphrase = "passphrase";\n\nconst serverRsa = generateKeyPairSync("rsa", {\n  modulusLength: 1024,\n  publicKeyEncoding: {\n    type: "spki",\n    format: "pem", //base64\u683c\u5f0f\u5bc6\u94a5\n  },\n  privateKeyEncoding: {\n    type: "pkcs8",\n    format: "pem",\n    cipher: "aes-256-cbc",\n    passphrase, // \u79c1\u94a5\u5bc6\u7801\n  },\n});\nconst caRSA = generateKeyPairSync("rsa", {\n  modulusLength: 1024,\n  publicKeyEncoding: {\n    type: "spki",\n    format: "pem", //base64\u683c\u5f0f\u5bc6\u94a5\n  },\n  privateKeyEncoding: {\n    type: "pkcs8",\n    format: "pem",\n    cipher: "aes-256-cbc",\n    passphrase, // \u79c1\u94a5\u5bc6\u7801\n  },\n});\n\n// \u670d\u52a1\u5668\u4fe1\u606f\nconst info = {\n  domain: "http://127.0.0.1:8080",\n  publicKey: serverRsa.publicKey,\n};\n\n// \u5c06\u670d\u52a1\u5668\u4fe1\u606f\u53d1\u9001\u7ed9CA\u673a\u6784\u5e76\u8bf7\u6c42\u9881\u53d1\u8bc1\u4e66\n// \u5b9e\u73b0\u7684\u65f6\u5019\u7b7e\u540d\u7684\u5e76\u4e0d\u662finfo,\u800c\u662f\u5b83\u7684hash,\u6027\u80fd\u5f88\u5dee,\u4e00\u822c\u4e0d\u80fd\u8ba1\u7b97\u5927\u91cf\u6570\u636e\n\nconst hash = createHash("sha256").update(JSON.stringify(info)).digest("hex");\n\nconst sign = getSign(hash, caRSA.privateKey, passphrase);\n\nconst cert = {\n  info,\n  sign, // CA\u7684\u7b7e\u540d\n}; // \u8fd9\u5c31\u662f\u8bc1\u4e66\uff0c\u5ba2\u6237\u7aef\u4f1a\u5148\u9a8c\u8bc1\u8bc1\u4e66\uff0c\u7528CA\u7684\u516c\u94a5\u9a8c\u8bc1\u8bc1\u4e66\u7684\u5408\u6cd5\u6027\n\nconst valid = verifySign(hash, sign, caRSA.publicKey);\nconsole.log("\u6d4f\u89c8\u5668\u9a8c\u8bc1CA\u7684\u7b7e\u540d", valid);\n\n// \u5982\u679c\u9a8c\u8bc1\u901a\u8fc7\u6d4f\u89c8\u5668\u53ef\u4ee5\u62ff\u5230\u670d\u52a1\u5668\u7684\u516c\u94a5\n\nconst serverPublicKey = cert.info.publicKey;\n\n// \u62ff\u5230\u670d\u52a1\u5668\u516c\u94a5\u4e4b\u540e,\u5411\u670d\u52a1\u5668\u53d1\u9001\u6570\u636e\u65f6,\u4f7f\u7528\u670d\u52a1\u5668\u7684\u516c\u94a5\u8fdb\u884c\u52a0\u5bc6\u5c31\u597d\u4e86\n\nfunction getSign(content, privateKey, passphrase) {\n  const signObj = createSign("RSA-SHA256");\n  signObj.update(content);\n  return signObj.sign({\n    key: privateKey,\n    format: "pem",\n    passphrase,\n  });\n}\n\nfunction verifySign(content, sign, publicKey) {\n  const verifyObj = createVerify("RSA-SHA256");\n  verifyObj.update(content);\n  return verifyObj.verify(publicKey, sign, "hex");\n}\n')),(0,r.kt)("h4",{id:"diffie-hellman-\u7b97\u6cd5"},"Diffie-Hellman \u7b97\u6cd5"),(0,r.kt)("p",null,"Diffie-Hellman \u7b97\u6cd5\u662f\u4e00\u79cd\u5bc6\u94a5\u4ea4\u6362\u534f\u8bae\uff0c\u5b83\u53ef\u4ee5\u5728\u53cc\u65b9\u4e0d\u6cc4\u9732\u5bc6\u94a5\u7684\u7684\u60c5\u51b5\u4e0b\u534f\u5546\u4e00\u4e2a\u5bc6\u94a5\u51fa\u6765"),(0,r.kt)("p",null,(0,r.kt)("img",{alt:"Diffie-Hellman\u7b97\u6cd5",src:n(5369).Z,width:"2105",height:"2730"})),(0,r.kt)("h5",{id:"\u539f\u7406-1"},"\u539f\u7406"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u516c\u5f00\u6570\u636e\uff0c\u7531A\u548cB\u534f\u5546\u7684\u7ed3\u679c\nconst N = 23;\nconst P = 5;\n\n// secretA \u548c secretB \u6307\u81ea\u5df1\u7684\u5bc6\u94a5,\u4e0d\u5411\u5916\u90e8\u516c\u5f00\nconst secretA = 9;\nconst secretB = 13;\n\n// A B\u662f\u6839\u636eN P\u8ba1\u7b97\u51fa\u7684\u6570\u636e.\u4f1a\u5206\u522b\u53d1\u9001\u7ed9\u5bf9\u65b9\nconst A = Math.pow(P, secretA) % N;\nconst B = Math.pow(P, secretB) % N;\n\n// \u5f53 A B\u90fd\u63a5\u53d7\u5230\u6570\u636e\u65f6\u5019,\u8ba1\u7b97\u51fa\u516c\u5171\u5bc6\u94a5\nconst commonA = Math.pow(B, secretA) % N;\nconst commonB = Math.pow(A, secretB) % N;\n\nconsole.log("\u8ba4\u8bc1\u6210\u529f\uff1f", commonA === commonB);\n')),(0,r.kt)("h5",{id:"\u4f7f\u7528"},"\u4f7f\u7528"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const { createDiffieHellman } = require("crypto");\nconst { generate } = require("escodegen");\n\n// \u5ba2\u6237\u7aef\n\nconst client = createDiffieHellman(521);\nconst clientKeys = client.generateKeys();\nconst generator = client.getGenerator();\nconst prime = client.getPrime();\n\n// \u670d\u52a1\u5668\u7aef\n\nconst server = createDiffieHellman(prime, generator);\nconst serverKeys = server.generateKeys();\n\n// \u4ea4\u6362\u4e34\u65f6\u5bc6\u94a5Key\n\nconst clientSecret = client.computeSecret(serverKeys).toString("hex");\nconst serverSecret = server.computeSecret(clientKeys).toString("hex");\n\nconsole.log(clientSecret);\nconsole.log(serverSecret);\n\nconsole.log("\u534f\u5546\u540e\u7684\u5bc6\u94a5\u662f\u5426\u4e00\u81f4", clientSecret === serverSecret);\n\n// \u6539\u534f\u5546\u5bc6\u94a5\u5c31\u662f\u7528\u6765\u4f20\u9012\u4fe1\u606f\u7684\u52a0\u5bc6\u4f9d\u636e\n')))}m.isMDXComponent=!0},5369:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/Diffie-Hellman\u7b97\u6cd5-fd02cb3f83092c18e5b83181a42f2337.png"},3179:(e,t,n)=>{n.d(t,{Z:()=>a});const a=n.p+"assets/images/\u6570\u5b57\u8bc1\u4e66\u6d41\u7a0b-cd7ba01cdd48c5fac97f6c493fd5f872.png"}}]);