"use strict";(self.webpackChunkmy_blog=self.webpackChunkmy_blog||[]).push([[5201],{9613:(e,n,r)=>{r.d(n,{Zo:()=>i,kt:()=>g});var l=r(9496);function t(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function o(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,l)}return r}function p(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){t(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function s(e,n){if(null==e)return{};var r,l,t=function(e,n){if(null==e)return{};var r,l,t={},o=Object.keys(e);for(l=0;l<o.length;l++)r=o[l],n.indexOf(r)>=0||(t[r]=e[r]);return t}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)r=o[l],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var u=l.createContext({}),a=function(e){var n=l.useContext(u),r=n;return e&&(r="function"==typeof e?e(n):p(p({},n),e)),r},i=function(e){var n=a(e.components);return l.createElement(u.Provider,{value:n},e.children)},c="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return l.createElement(l.Fragment,{},n)}},d=l.forwardRef((function(e,n){var r=e.components,t=e.mdxType,o=e.originalType,u=e.parentName,i=s(e,["components","mdxType","originalType","parentName"]),c=a(r),d=t,g=c["".concat(u,".").concat(d)]||c[d]||m[d]||o;return r?l.createElement(g,p(p({ref:n},i),{},{components:r})):l.createElement(g,p({ref:n},i))}));function g(e,n){var r=arguments,t=n&&n.mdxType;if("string"==typeof e||t){var o=r.length,p=new Array(o);p[0]=d;var s={};for(var u in n)hasOwnProperty.call(n,u)&&(s[u]=n[u]);s.originalType=e,s[c]="string"==typeof e?e:t,p[1]=s;for(var a=2;a<o;a++)p[a]=r[a];return l.createElement.apply(null,p)}return l.createElement.apply(null,r)}d.displayName="MDXCreateElement"},1787:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>u,contentTitle:()=>p,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>a});var l=r(2564),t=(r(9496),r(9613));const o={},p="rollup \u5982\u4f55\u914d\u7f6e\u751f\u6210\u4e00\u4e2a React \u7ec4\u4ef6\u5e93",s={unversionedId:"pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93",id:"pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93",title:"rollup \u5982\u4f55\u914d\u7f6e\u751f\u6210\u4e00\u4e2a React \u7ec4\u4ef6\u5e93",description:"\u5b89\u88c5 Rollup \u53ca\u76f8\u5173\u63d2\u4ef6",source:"@site/docs/pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93.md",sourceDirName:"pack/rollup",slug:"/pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93",permalink:"/docs/pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/pack/rollup/\u5982\u4f55\u7528rollup\u914d\u7f6eReact\u7ec4\u4ef6\u5e93.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Rollup",permalink:"/docs/pack/rollup/"},next:{title:"\u7b97\u6cd5",permalink:"/docs/algorithm/"}},u={},a=[{value:"\u5b89\u88c5 Rollup \u53ca\u76f8\u5173\u63d2\u4ef6",id:"\u5b89\u88c5-rollup-\u53ca\u76f8\u5173\u63d2\u4ef6",level:2},{value:"\u65b0\u5efa rollup.config.js \u6587\u4ef6\uff0c\u914d\u7f6e Rollup",id:"\u65b0\u5efa-rollupconfigjs-\u6587\u4ef6\u914d\u7f6e-rollup",level:2},{value:"\u914d\u7f6e babel",id:"\u914d\u7f6e-babel",level:2},{value:"\u914d\u7f6e postcss",id:"\u914d\u7f6e-postcss",level:2},{value:"\u5728 package.json \u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e",id:"\u5728-packagejson-\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e",level:2},{value:"\u6253\u5305",id:"\u6253\u5305",level:2},{value:"\u652f\u6301 Typescript",id:"\u652f\u6301-typescript",level:2},{value:"\u5b89\u88c5 TypeScript \u53ca\u76f8\u5173\u63d2\u4ef6",id:"\u5b89\u88c5-typescript-\u53ca\u76f8\u5173\u63d2\u4ef6",level:3},{value:"\u4fee\u6539 rollup.config.js \u914d\u7f6e",id:"\u4fee\u6539-rollupconfigjs-\u914d\u7f6e",level:3},{value:"\u65b0\u589e\u65b0\u589e tsconfig.json \u6587\u4ef6",id:"\u65b0\u589e\u65b0\u589e-tsconfigjson-\u6587\u4ef6",level:3}],i={toc:a},c="wrapper";function m(e){let{components:n,...r}=e;return(0,t.kt)(c,(0,l.Z)({},i,r,{components:n,mdxType:"MDXLayout"}),(0,t.kt)("h1",{id:"rollup-\u5982\u4f55\u914d\u7f6e\u751f\u6210\u4e00\u4e2a-react-\u7ec4\u4ef6\u5e93"},"rollup \u5982\u4f55\u914d\u7f6e\u751f\u6210\u4e00\u4e2a React \u7ec4\u4ef6\u5e93"),(0,t.kt)("h2",{id:"\u5b89\u88c5-rollup-\u53ca\u76f8\u5173\u63d2\u4ef6"},"\u5b89\u88c5 Rollup \u53ca\u76f8\u5173\u63d2\u4ef6"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev rollup rollup-plugin-babel rollup-plugin-node-resolve rollup-plugin-commonjs rollup-plugin-peer-deps-external rollup-plugin-postcss rollup-plugin-uglify\n\n")),(0,t.kt)("h2",{id:"\u65b0\u5efa-rollupconfigjs-\u6587\u4ef6\u914d\u7f6e-rollup"},"\u65b0\u5efa rollup.config.js \u6587\u4ef6\uff0c\u914d\u7f6e Rollup"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'// rollup.config.js\nimport babel from "rollup-plugin-babel";\nimport resolve from "rollup-plugin-node-resolve";\nimport commonjs from "rollup-plugin-commonjs";\nimport peerDepsExternal from "rollup-plugin-peer-deps-external";\nimport postcss from "rollup-plugin-postcss";\nimport { uglify } from "rollup-plugin-uglify";\n\nexport default {\n  input: "src/index.js", // \u5165\u53e3\u6587\u4ef6\u8def\u5f84\n  output: [\n    {\n      // \u8f93\u51fa\u6587\u4ef6\u914d\u7f6e\n      file: "dist/bundle.js", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n      format: "cjs", // \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\n      sourcemap: true, // \u751f\u6210sourcemap\u6587\u4ef6\n    },\n  ],\n  plugins: [\n    // \u63d2\u4ef6\u914d\u7f6e\n    peerDepsExternal(), // \u6392\u9664peerDependencies\u4e2d\u58f0\u660e\u7684\u4f9d\u8d56\n    resolve({ browser: true }), // \u89e3\u6790npm\u4e2d\u7684\u6a21\u5757\n    commonjs(), // \u5c06CommonJS\u6a21\u5757\u8f6c\u6362\u4e3aES6\u6a21\u5757\n    babel({ exclude: "node_modules/**" }), // \u4f7f\u7528Babel\u8f6c\u6362ES6\u4ee3\u7801\n    postcss(), // \u5904\u7406css\u6a21\u5757\n    uglify(), // \u538b\u7f29\u8f93\u51fa\u6587\u4ef6\n  ],\n  external: ["react", "react-dom"], // \u5916\u90e8\u4f9d\u8d56\u58f0\u660e\n};\n')),(0,t.kt)("h2",{id:"\u914d\u7f6e-babel"},"\u914d\u7f6e babel"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'// babel.config.js\nmodule.exports = {\n  presets: ["@babel/preset-env", "@babel/preset-react"],\n};\n')),(0,t.kt)("h2",{id:"\u914d\u7f6e-postcss"},"\u914d\u7f6e postcss"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'// postcss.config.js\nmodule.exports = {\n  plugins: ["postcss-preset-env"],\n};\n')),(0,t.kt)("h2",{id:"\u5728-packagejson-\u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e"},"\u5728 package.json \u6587\u4ef6\u4e2d\u6dfb\u52a0\u5982\u4e0b\u914d\u7f6e"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "main": "dist/bundle.js",\n  "module": "src/index.js",\n  "peerDependencies": {\n    "react": "^16.8.0",\n    "react-dom": "^16.8.0"\n  }\n}\n')),(0,t.kt)("h2",{id:"\u6253\u5305"},"\u6253\u5305"),(0,t.kt)("p",null,"\u6267\u884c npm run build \u547d\u4ee4\u8fdb\u884c\u6253\u5305\uff0c\u6253\u5305\u540e\u7684\u4ee3\u7801\u5728 dist \u6587\u4ef6\u5939\u4e0b\u3002"),(0,t.kt)("h2",{id:"\u652f\u6301-typescript"},"\u652f\u6301 Typescript"),(0,t.kt)("h3",{id:"\u5b89\u88c5-typescript-\u53ca\u76f8\u5173\u63d2\u4ef6"},"\u5b89\u88c5 TypeScript \u53ca\u76f8\u5173\u63d2\u4ef6"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save-dev typescript @rollup/plugin-typescript @rollup/plugin-dts rollup-plugin-typescript2\n\n")),(0,t.kt)("h3",{id:"\u4fee\u6539-rollupconfigjs-\u914d\u7f6e"},"\u4fee\u6539 rollup.config.js \u914d\u7f6e"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-js"},'import typescript from "@rollup/plugin-typescript";\nimport dts from "@rollup/plugin-dts";\nimport commonjs from "@rollup/plugin-commonjs";\nimport nodeResolve from "@rollup/plugin-node-resolve";\nimport postcss from "rollup-plugin-postcss";\nimport { terser } from "rollup-plugin-terser";\n\nconst plugins = [nodeResolve(), typescript(), commonjs(), postcss()];\n\nexport default [\n  {\n    input: "./src/index.tsx", // \u5165\u53e3\u6587\u4ef6\u8def\u5f84\n    output: [\n      {\n        name: "MyComponent",\n        file: "dist/bundle.cjs.js", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n        format: "cjs", // \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\n        sourcemap: true, // \u751f\u6210sourcemap\u6587\u4ef6\n      },\n      {\n        name: "MyComponent",\n        file: "dist/bundle.esm.js", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n        format: "esm", // \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\n        sourcemap: true, // \u751f\u6210sourcemap\u6587\u4ef6\n      },\n      {\n        name: "MyComponent",\n        file: "dist/bundle.umd.js", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n        format: "umd", // \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\n        sourcemap: true, // \u751f\u6210sourcemap\u6587\u4ef6\n      },\n      {\n        name: "MyComponent",\n        file: "dist/bundle.min.js", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n        format: "umd", // \u8f93\u51fa\u6587\u4ef6\u683c\u5f0f\n        plugins: [terser()], // \u5bf9\u8f93\u51fa\u6587\u4ef6\u8fdb\u884c\u538b\u7f29\n        sourcemap: true, // \u751f\u6210sourcemap\u6587\u4ef6\n      },\n    ],\n    plugins: plugins,\n  },\n  {\n    input: "./src/index.tsx", // \u5165\u53e3\u6587\u4ef6\u8def\u5f84\n    output: [\n      {\n        // \u8f93\u51fa\u6587\u4ef6\u914d\u7f6e\n        file: "dist/index.d.ts", // \u8f93\u51fa\u6587\u4ef6\u8def\u5f84\n        format: "es",\n      },\n    ],\n    plugins: [dts()],\n  },\n];\n')),(0,t.kt)("h3",{id:"\u65b0\u589e\u65b0\u589e-tsconfigjson-\u6587\u4ef6"},"\u65b0\u589e\u65b0\u589e tsconfig.json \u6587\u4ef6"),(0,t.kt)("pre",null,(0,t.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "compilerOptions": {\n    "declaration": true,\n    "jsx": "react",\n    "module": "esnext",\n    "moduleResolution": "node",\n    "target": "es5"\n  },\n  "exclude": ["node_modules", "dist"]\n}\n')))}m.isMDXComponent=!0}}]);